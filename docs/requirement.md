# 카테고리 구현 요구사항 분석서


---


## 카테고리 특이사항
 - depth : 카테고리 depth는 대분류/중분류로 2단계로 구성된다.
 - 카테고리 순서 : 시즌별로 표시되는 카테고리의 순서를 조정할 수 있도록, 카테고리 순서대로 조회하고 순서를 수정할 수 있게 한다.

## 카테고리 조회  
  - 상위 카테고리를 이용해 하위의 모든 카테고리 조회
    - 하위 카테고리 정보와 명시한 상위카테고리 정보 반환
  - 상위 카테고리 미지정 시 전체 카테고리 반환
    - 카테고리 반환 구조는 hierarchy 구조

## 카테고리 등록
  - depth 2까지만 생성되도록 구현.
  - 카테고리 순서 : 등록 시, 같은 depth의 맨 마지막 순서로 자동으로 등록된다. 

## 카테고리 수정
  - 앞단에서는 수정 전에 카테고리 상세조회 API를 호출한다.  
  - `하위 카테고리가 없는 카테고리 수정` 
    - 카테고리 제목만 수정 가능.
  - `하위 카테고리가 있는 카테고리 수정` 
    - 같은 depth의 카테고리들의 순서를 한꺼번에 조정할 수 있다. 즉, subCategories에 조회된 데이터의 순서를 변경할 수 있다. 
    - 카테고리 제목은 subCategories와 상위카테고리 모두 수정 가능하다. 
  - depth 변경은 되지 않는다. 
    - depth 변경은 카테고리를 새로 생성하고, 기존 것은 삭제하여 사용하도록 한다.
    - depth 변경은 카테고리와 상품의 재연결이 필요하므로, depth 변경은 되지 않도록 한다. 

## 카테고리 삭제
  - 상위 카테고리 삭제 시 하위 카테고리도 삭제.
  - 실제 데이터가 삭제 되는 hard delete로 구현.
  
